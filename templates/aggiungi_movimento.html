<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <title>Aggiungi Movimento - Magazzino</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      body { font-family: "Inter", sans-serif; background-color: #eef2f7; }
    </style>
  </head>

  <body class="bg-blue-800">
    {% include "_header.html" %}

    <main class="max-w-4xl mx-auto p-4">
      <h1 class="text-2xl font-bold text-yellow-400 text-center md:text-left mb-6">Aggiungi Movimento</h1>

      <form method="POST" class="bg-white p-6 rounded-xl shadow-md space-y-4">
        <!-- Nome Prodotto -->
        <div>
          <label class="block text-gray-700 font-semibold text-sm">Nome Prodotto</label>
          <input type="text" name="nome" required placeholder="Es. Estintore portatile"
                 class="w-full border border-gray-300 rounded-lg p-2 text-sm" />
        </div>

        <!-- Categoria -->
        <div>
          <label class="block text-gray-700 font-semibold text-sm">Categoria</label>
          <select name="categoria_id" required class="w-full border border-gray-300 rounded-lg p-2 text-sm">
            <option value="" disabled selected>Seleziona categoria</option>
            {% for id, nome, descrizione in categorie %}
            <option value="{{ id }}">{{ nome }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Misura e Tipo Movimento -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-gray-700 font-semibold text-sm">Misura</label>
            <input type="text" name="misura" required placeholder="Es. pz, scatola, litro..."
                   class="w-full border border-gray-300 rounded-lg p-2 text-sm" />
          </div>

          <div>
            <label class="block text-gray-700 font-semibold text-sm">Tipo Movimento</label>
            <select name="tipo_movimento" required class="w-full border border-gray-300 rounded-lg p-2 text-sm">
              <option value="" disabled selected>Entrata o Uscita?</option>
              <option value="entrata">Entrata</option>
              <option value="uscita">Uscita</option>
            </select>
          </div>
        </div>

        <!-- Data Movimento e Quantità -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-gray-700 font-semibold text-sm">Data Movimento</label>
            <input type="date" name="data_movimento" required
                   class="w-full border border-gray-300 rounded-lg p-2 text-sm" />
          </div>

          <div>
            <label class="block text-gray-700 font-semibold text-sm">Quantità</label>
            <input type="number" name="quantita" min="1" required placeholder="Inserisci la quantità"
                   class="w-full border border-gray-300 rounded-lg p-2 text-sm" />
          </div>
        </div>

        <!-- Data Scadenza (solo entrata) e Posizione -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div id="scadenza-container">
            <label class="block text-gray-700 font-semibold text-sm">Data di Scadenza</label>
            <input type="date" name="data_scadenza" id="data_scadenza"
                   class="w-full border border-gray-300 rounded-lg p-2 text-sm" />
          </div>

          <div>
            <label class="block text-gray-700 font-semibold text-sm">Posizione</label>
            <input type="text" name="posizione" placeholder="Es. Armadio A, Scaffale 3"
                   class="w-full border border-gray-300 rounded-lg p-2 text-sm" />
          </div>
        </div>

        <!-- Pulsanti -->
        <div class="flex flex-col sm:flex-row justify-start gap-3 pt-2">
          <button type="submit"
                  class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm">
            Salva Movimento
          </button>
          <a href="{{ url_for('movimenti_view') }}"
             class="text-gray-600 hover:underline text-sm flex items-center justify-center">
            Annulla
          </a>
        </div>
      </form>
    </main>

    <!-- JS separato -->
    <script src="{{ url_for('static', filename='js/aggiungi_movimento.js') }}"></script>
  </body>
</html>
