{% extends "base.html" %}
{% block content %}
<div class="container mx-auto p-6 max-w-2xl">
    {# CONTROLLO DI SICUREZZA LATO TEMPLATE #}
    {% if session.get('ruolo') == 'Amministratore' %}

    <div class="bg-white shadow-2xl rounded-2xl p-8 border border-gray-100">
        <div class="flex items-center gap-3 mb-2">
            <span class="text-3xl">‚öôÔ∏è</span>
            <h2 class="text-2xl font-bold text-gray-800">Configura Dotazione</h2>
        </div>
        <p class="text-gray-500 mb-6">Imposta le quantit√† minime per: <span class="font-bold text-blue-600">{{ nome
                }}</span></p>

        <form method="POST" class="space-y-6">
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2">Seleziona Prodotto</label>
                <select name="prodotto_id"
                    class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none appearance-none bg-no-repeat bg-right pr-10"
                    style="background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23666%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22/%3E%3C/svg%3E'); background-size: .6em auto;">
                    {% for p in prodotti %}
                    <option value="{{ p[0] }}">{{ p[1] }}</option>
                    {% endfor %}
                </select>
            </div>

            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2">Quantit√† Standard (Obiettivo)</label>
                <input type="number" name="qta_standard" min="0" required
                    class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none"
                    placeholder="Esempio: 10">
            </div>

            <div class="flex flex-col sm:flex-row gap-4 pt-4">
                <button type="submit"
                    class="flex-1 bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-700 transition shadow-lg active:scale-95">
                    Salva Standard
                </button>
                <a href="{{ url_for('checklist_mezzo', mezzo_id=mezzo_id) }}"
                    class="flex-1 bg-gray-100 text-gray-600 font-bold py-3 rounded-xl text-center hover:bg-gray-200 transition">
                    Torna alla Checklist
                </a>
            </div>
        </form>
    </div>

    {% else %}
    {# MESSAGGIO DI ERRORE PER CHI NON √à ADMIN #}
    <div class="bg-white shadow-xl rounded-2xl p-10 text-center border border-red-100">
        <div class="text-red-500 text-6xl mb-4">üö´</div>
        <h2 class="text-2xl font-bold text-gray-800 mb-2">Accesso Negato</h2>
        <p class="text-gray-600 mb-6">Spiacente, solo gli amministratori possono modificare le dotazioni dei mezzi.</p>
        <a href="{{ url_for('index') }}"
            class="inline-block bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700 transition">
            Torna alla Home
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}